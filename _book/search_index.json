[
["index.html", "數量方法（一） 課程大綱 基本資訊 主題內容 參考書籍 Cheatsheets 本學期上課前請先依序完成以下項目 hypothes.is電子講義討論群 評分方式", " 數量方法（一） 林茂廷老師 2018-03-30 課程大綱 電子書網址：https://bookdown.org/tpemartin/econometric_analysis/ 基本資訊 授課老師： 林茂廷 辦公室：社科大樓3F01 諮詢時間：週二下午2點30-4點30 電話：02﹣86741111轉67170 Email：mtlin@gm.ntpu.edu.tw 作業上傳網址：https://www.dropbox.com/request/wAzlAatjCjvvExQZlzje 課程討論室：https://sites.google.com/view/econometric-analysis/home 分組名單填寫網址：https://goo.gl/forms/zXymIEOQbgagwRkg2 分組結果：請點此查閱自己的“組號” 課堂程式說明：Github repo: Econometrics-in-class-practice 主題內容 In this semester, we will focus on Part II and Part VI of Greene’s book. The topics that I will cover are: [1] The Generalized Regression Model (ch.8) [2] Models for Panel Data (ch.9) [3] Models for Discrete Choice (ch.23) [4] Truncation, Censoring, and Sample Selection (ch.24) [5] Instrumental Variable Estimation (ch.12) 參考書籍 Greene, William, Econometric Analysis, 6th ed, 2007, Prentice Hall. R for Data Science. Principles of Econometrics with R, Constantin Colonescu, bookdown.org, 2016. Efficient R Programming, Colin Gillespie and Robin Lovelace, bookdown.org, 2016. Econometrics with R, Franz Mohr, personal blog (Awesome!!! I must say.) Cheatsheets dplyr R markdown ggplot2 本學期上課前請先依序完成以下項目 安裝：R and R Studio Desktop: https://www.rstudio.com 註冊Github.com: https://www.github.com 安裝Github desktop: https://desktop.github.com/ 連到https://gitter.im用你的Github帳號登錄。 註冊hypothes.is: https://hypothes.is 填寫課程資料: https://goo.gl/hZzv4D hypothes.is電子講義討論群 https://hypothes.is/groups/xPgdmzMj/shu-fang-106xue-nian 評分方式 方案一： 方案二： 不超過3人（限本課程同學）參加2018經濟部落客競賽 "],
["ols.html", "第 1 章 OLS 1.1 因果關連 1.2 效應評估 1.3 選擇偏誤 1.4 條件式獨立 1.5 複迴歸模型", " 第 1 章 OLS “受教育年限越高，是否年薪會越高？” 這裡的解釋變數(\\(X\\))與被解釋變數(\\(Y\\))分別是什麼？而\\(\\varepsilon\\)又可能代表那些東西？ 1.1 因果關連 小明高中畢業，目前年薪30萬元。要驗證「若小明有上大學，他可獲得較高的年薪」，請問要做什麼樣的情境比較？ \\(i\\)代表小明： 被解釋變數 情境 \\(Y_{0i}\\) 只有高中畢業的小明 \\(Y_{1i}\\) 有大學畢業的小明 考慮以下的比較： \\[Y_{0i}-Y_{1i}\\] 由於都是小明(i)，所以上述比較具備有大學文憑帶給小明的薪資效果（具有因果詮釋力）。 小娟大學畢業，目前年薪60萬元。要驗證「若小娟沒有上大學，她可獲得的年薪會變低」，請問要做什麼樣的情境比較？ \\(j\\)代表小娟： 被解釋變數 情境 \\(Y_{0j}\\) 只有高中畢業的小娟 \\(Y_{1j}\\) 有大學畢業的小娟 在上面的兩個例子，都有一個情境的薪資是觀察不到的。令Y代表觀察到的薪資（可能是大學薪資\\(Y_1\\)，也可能是高中薪資\\(Y_0\\)，視對象實際有無上大學而定）；則 \\[Y_k=Y_{0k}+(Y_{1k}-Y_{0k}) T_{k}\\] 這裡\\(k\\)泛指任何人。上式表示： 每一個有大學文憑的人（即T=1），他的實際薪資是他的「高中文憑薪資」再加上「大學學歷效果」所造成。 令\\(\\delta_k\\equiv Y_{1k}-Y_{0k}\\)代表每個人的大學文憑效果。 假設每個人的文憑效果相同\\(\\delta_k=\\delta\\), 則： \\[Y_k=Y_{0k}+\\delta T_{k}\\] 這裡的\\(\\delta\\)即為我們所要估計的效應值。 效應值是邏輯論述下的描述，並不是所謂的迴歸模型，也還不涉及任何統計操作。 1.2 效應評估 給定效應模型： \\[\\begin{equation} Y_k=Y_{0k}+\\delta T_{k} \\tag{1.1} \\end{equation}\\] 我們想進一步評估效應參數\\(\\delta\\)。 考慮用\\(Y_{1j}-Y_{0i}\\)代表上大學（對上只有高中畢業）給小明和小娟帶來的薪資效果，你需要什麼假設？ Read more… 小娟若沒有上大學，她現在的薪資和小明一樣。(\\(Y_{0i}=Y_{0j}\\)) 任選兩個人他們的高中文憑薪資要相同的可能性很低，你會怎麼做呢？ Read more… 隨機抽不同學歷的兩「群」人（最好大樣本），比較他們的薪資差異。 考慮以下平均薪資差異： \\[\\bar{Y}_{college}-\\bar{Y}_{highschool}\\] 針對(1.1)式，上式是在估計什麼？ Read more… \\(\\mathbb{E}(Y|T=1)-\\mathbb{E}(Y|T=0)\\) 1.3 選擇偏誤 \\(\\mathbb{E}(Y|T=1)-\\mathbb{E}(Y|T=0)\\)會等於\\(\\delta\\)嗎? Read more… \\(\\mathbb{E}(Y_{0}|T=1)-\\mathbb{E}(Y_{0}|T=0)+\\delta\\) 隨機抽樣下，大學畢業生的平均「高中文憑薪資」與高中畢業生的平均「高中文憑薪資」有很大的機會是不同的。 你可以想到造成不同的理由嗎？ 經濟直覺： 立足點高的人（即「高中文憑薪資」高的）比較傾向上大學（即選擇接受T＝1的試驗）, 所以單純比較實際大學平均薪資與實際高中平均薪資，其中的差異除了反應大學文憑效果外，也反應了立足點差異程度。 若個體立足點高低會影響其選擇接受試驗與否，此時造成的效應評估偏誤稱之為「選擇偏誤（selection bias）」。 延伸重點… 要能對因果關係進行合理評估，除了邏輯上兩者要存在可能因果外，還需要： 個體會不會被treated（即最後有沒有上大學，T），必需與個體還沒決定（或被決定）接受treated「前」的狀態（即只拿高中文憑的薪資成就，\\(Y_0\\)）無關。 另外， 隨機抽樣（random sampling）並不一定產生隨機試驗（random assignment of treatments）的效果。 1.4 條件式獨立 有些時候「立足點」與「受試選擇」會有關連（以至於產生選擇偏誤），主要是透過某些影響立足點的變數造成。 考慮如下情境： 「高中文憑薪資」與「上大學」的關連主要是透過「家庭所得」： *「家庭所得」越高的家庭，小孩就算只有高中文憑，家庭資源也會使得他們的薪資表現不錯。 *「家庭所得」越高，個人越可能選擇「上大學」。 其他有可能影響「高中文憑薪資」的因素，假設都不會影響個人「上大學」決策。 比較來自相同「家庭所得」的一大群人，若當中有大學文憑的平均薪資與只有高中文憑的平均薪資有差異，這差異會是「高中文憑薪資」立足點差異造成的嗎？ 在固定「家庭所得（HIncome）」條件下，「高中文憑薪資」（立足點）與「上大學」彼此無關連，此稱為條件獨立（conditional independence），數學表示為： \\[\\begin{equation} Y_{0i}\\perp T_i | HIncome_i \\tag{1.2} \\end{equation}\\] 它也意含 \\[\\mathbb{E}(Y_{0i}|HIncome_i,T_i)=\\mathbb{E}(Y_{0i}|HIncome_i)。\\] 1.5 複迴歸模型 比較母體中同家庭所得層次樣本，此時有無「上大學」兩群人的平均薪資差異： \\[\\mathbb{E}(Y|T=1,HIncome)-\\mathbb{E}(Y|T=0,HIncome)，\\] 會得到大學文憑效應值嗎？ Read more… \\[\\begin{align} \\begin{split} \\mathbb{E}(Y|T&amp;=1,HIncome)-\\mathbb{E}(Y|T=0,HIncome)\\\\&amp;=\\mathbb{E}(Y_{0}|T=1,HIncome)-\\mathbb{E}(Y_{0}|T=0,HIncome)+\\delta\\\\&amp;=\\mathbb{E}(Y_{0}|HIncome)-\\mathbb{E}(Y_{0}|HIncome)+\\delta\\\\&amp;=\\delta \\end{split} \\tag{1.3} \\end{align}\\] 隨機變數訊息拆解 任何隨機變數一定可以被拆解成「可被解釋變數捕捉」的部份和「無法由被解釋變數捕捉」的部份，例如： \\[Y=\\mathbb{E}(Y|T,HIncome)+(Y-\\mathbb{E}(Y|T,HIncome))\\] 令\\(\\varepsilon=Y-\\mathbb{E}(Y|T,HIncome)\\)，則： \\[Y=\\mathbb{E}(Y|T,HIncome)+\\varepsilon.\\] 其中 \\[\\begin{align} \\mathbb{E}(Y|T,HIncome) =\\mathbb{E}(Y_{0}|T,HIncome)+\\delta T =\\mathbb{E}(Y_{0}|HIncome)+\\delta T \\end{align}\\] 若\\(\\mathbb{E}(Y_{0}|HIncome)=\\beta_0+\\beta_1HIncome\\)為線性關連，則 \\[\\begin{equation} Y=\\beta_0+\\beta_1HIncome+\\delta T+\\varepsilon \\tag{1.4} \\end{equation}\\] 表示用迴歸模型(1.4)所得到的母體迴歸線可以用來代表\\(\\mathbb{E}(Y|T,HIncome)\\)。 幾個重要觀念 迴歸模型可以幫我們得到\\(\\mathbb{E}(Y|T,HIncome)\\)值。 但\\(\\mathbb{E}(Y|T,HIncome)\\)是否有助於提煉出所要的效應值得回到效應模型來看。 由本節的問題討論，我們得知： 若「高中文憑薪資高低」（立足點）與「上大學與否」在相同「家庭所得」條件下會獨立，即(1.2)條件獨立成立，則上述複迴歸式的OLS估計式可以得到大學文憑效應的合理估計。 當迴歸分析的目的在衡量「因果效應」時，我們使用複迴歸的目的在於： 確保「試驗變數」與「立足點」在相同「控制背景」下，具有《條件性獨立》的特質。 "],
["r-in-ols.html", "第 2 章 R in OLS 2.1 setup 2.2 dataframe物件 2.3 資料處理：產生新變數 dplyr::mutate 2.4 因果問句 2.5 效應評估 2.6 進階關連分析 2.7 複迴歸模型 2.8 模型比較", " 第 2 章 R in OLS 2.1 setup library(&quot;AER&quot;) library(&quot;ggplot2&quot;) library(&quot;dplyr&quot;) library(&quot;knitr&quot;) 2.2 dataframe物件 data(&quot;Journals&quot;) Journal這個dataframe的結構(structure)是什麼？有幾個變數？每個變數物件的類別(class)又是什麼？ 找出Journal資料的詳細說明。 2.3 資料處理：產生新變數 dplyr::mutate Journals %&gt;% mutate(citeprice=price/citations) -&gt; journals summary(journals) 2.4 因果問句 期刊的價格(citeprice，平均文獻引用價格)如何影響其圖書館訂閱量(subs)? library(psych) journals %&gt;% select(citeprice,subs) %&gt;% pairs.panels() journals %&gt;% select(citeprice,subs) %&gt;% mutate_all(log) %&gt;% pairs.panels() 為什麼取log後，兩者的相關度變高？它表示兩個變數變得更不獨立嗎？ 2.5 效應評估 單純比較不同「期刊價格」(citeprice)的期刊所獨得的圖書館「訂閱數」(subs)變化並無法反應真正的「期刊價格」效應，原因是「立足點」並不與「期刊價格」獨立。 這裡「立足點」指得是什麼？ Read more… 「低價格下的訂閱數」（包含高價格期刊若採低價格的訂閱情境）。 你認為高價期刊，若採低價，它的訂閱數會與目前低價期刊相同嗎？為什麼？ 2.6 進階關連分析 數值變數v.s.數值變數 # 判斷變數是否為數值類別 is_numeric&lt;-function(x) all(is.numeric(x)) # 計算數數與citeprice的相關係數 cor_citeprice&lt;-function(x) cor(x,journals$citeprice) journals %&gt;% select_if(is_numeric) %&gt;% summarise_all(cor_citeprice) %&gt;% kable() 期刊越重要，其引用次數越高，因此高引用次數的期刊，你認為它在「低價格下的訂閱數」（立足點）會比較高還是低？ 承上題，單純比較「期刊引用單價」高低間的「訂閱數量」差別，所估算出來的價格效果以絕對值來看會高估、還是低估？為什麼？ 2.7 複迴歸模型 journals %&gt;% lm(log(subs)~log(citeprice),data=.) ## ## Call: ## lm(formula = log(subs) ~ log(citeprice), data = .) ## ## Coefficients: ## (Intercept) log(citeprice) ## 4.766 -0.533 journals %&gt;% lm(log(subs)~log(citeprice)+foundingyear,data=.) ## ## Call: ## lm(formula = log(subs) ~ log(citeprice) + foundingyear, data = .) ## ## Coefficients: ## (Intercept) log(citeprice) foundingyear ## 10.01615 -0.51303 -0.00267 2.8 模型比較 journals %&gt;% lm(log(subs)~log(citeprice),data=.) -&gt; model_1 journals %&gt;% lm(log(subs)~log(citeprice)+foundingyear,data=.) -&gt; model_2 library(sandwich) library(lmtest) library(stargazer) #使用vcovHC函數來計算HC1型的異質變異（即橫斷面資料下的線性迴歸模型） coeftest(model_1, vcov. = vcovHC, type=&quot;HC1&quot;) -&gt; model_1_coeftest coeftest(model_2, vcov. = vcovHC, type=&quot;HC1&quot;) -&gt; model_2_coeftest stargazer(model_1, model_2, se=list(model_1_coeftest[,&quot;Std. Error&quot;], model_2_coeftest[,2]), type=&quot;html&quot;, align=TRUE) 關於vcovHC()更多type的探討，請見： Zeileis A (2006), Object-Oriented Computation of Sandwich Estimators. Journal of Statistical Software, 16(9), 1–16. URL http://www.jstatsoft.org/v16/i09/. "]
]
